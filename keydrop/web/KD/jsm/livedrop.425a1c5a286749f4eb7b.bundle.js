!function(){"use strict";var t={8311:function(t,e,n){var i=n(7294),r=n(5637),o=n(3038),a=n.n(o),s=n(6479),l=n.n(s),c=n(2646),u=n(1338),d=n(5888);function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var p=new Map,v=new Map,h=0;function m(t,e,n){if(void 0===n&&(n={}),!t)return function(){};var i=function(t){var e=function(t){return Object.keys(t).sort().filter((function(e){return void 0!==t[e]})).map((function(e){return e+"_"+("root"===e?(n=t.root)?(v.has(n)||(h+=1,v.set(n,h.toString())),v.get(n)):"0":t[e]);var n})).toString()}(t),n=p.get(e);if(!n){var i,r=new Map,o=new IntersectionObserver((function(e){e.forEach((function(e){var n,o=e.isIntersecting&&i.some((function(t){return e.intersectionRatio>=t}));t.trackVisibility&&void 0===e.isVisible&&(e.isVisible=o),null==(n=r.get(e.target))||n.forEach((function(t){t(o,e)}))}))}),t);i=o.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:o,elements:r},p.set(e,n)}return n}(n),r=i.id,o=i.observer,a=i.elements,s=a.get(t)||[];return a.has(t)||a.set(t,s),s.push(e),o.observe(t),function(){s.splice(s.indexOf(e),1),0===s.length&&(a.delete(t),o.unobserve(t)),0===a.size&&(o.disconnect(),p.delete(r))}}function g(t){return"function"!=typeof t.children}var b=function(t){var e,n;function r(e){var n;return(n=t.call(this,e)||this).node=null,n._unobserveCb=null,n.handleNode=function(t){n.node&&(n.unobserve(),t||n.props.triggerOnce||n.props.skip||n.setState({inView:!!n.props.initialInView,entry:void 0})),n.node=t||null,n.observeNode()},n.handleChange=function(t,e){t&&n.props.triggerOnce&&n.unobserve(),g(n.props)||n.setState({inView:t,entry:e}),n.props.onChange&&n.props.onChange(t,e)},n.state={inView:!!e.initialInView,entry:void 0},n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o=r.prototype;return o.componentDidUpdate=function(t){t.rootMargin===this.props.rootMargin&&t.root===this.props.root&&t.threshold===this.props.threshold&&t.skip===this.props.skip&&t.trackVisibility===this.props.trackVisibility&&t.delay===this.props.delay||(this.unobserve(),this.observeNode())},o.componentWillUnmount=function(){this.unobserve(),this.node=null},o.observeNode=function(){if(this.node&&!this.props.skip){var t=this.props,e=t.threshold,n=t.root,i=t.rootMargin,r=t.trackVisibility,o=t.delay;this._unobserveCb=m(this.node,this.handleChange,{threshold:e,root:n,rootMargin:i,trackVisibility:r,delay:o})}},o.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},o.render=function(){if(!g(this.props)){var t=this.state,e=t.inView,n=t.entry;return this.props.children({inView:e,entry:n,ref:this.handleNode})}var r=this.props,o=r.children,a=r.as,s=r.tag,l=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(r,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView"]);return(0,i.createElement)(a||s||"div",f({ref:this.handleNode},l),o)},r}(i.Component);function w(){return"undefined"==typeof document||"visible"===document.visibilityState}b.displayName="InView",b.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};var y,_,D=n(2510),O=n(319),M=n.n(O),N=n(9713),T=n.n(N),E=n(629),A=n(375);!function(t){t.MY_DROP_START="MY_DROP_START",t.MY_DROP_STOP="MY_DROP_STOP",t.ON="ON",t.OFF="OFF",t.ADD_ITEMS="ADD_ITEMS",t.ADD_MY_ITEMS="ADD_MY_ITEMS",t.CHNAGE_TO_BEST="CHNAGE_TO_BEST",t.CHNAGE_TO_ALL="CHNAGE_TO_ALL",t.RETRY="RETRY",t.CHANGE_ROW_LENGTH="CHANGE_ROW_LENGTH",t.ANIMATION_COMPLETE="ANIMATION_COMPLETE"}(_||(_={}));var x=function(t){return window.__livedrop.steamID===t.Steam_ID},S=function(t){return!x(t)},C=function(t){var e=t.Lvl;return+t.Upgrader>0||+e>0},k=(0,E.J)({id:"Livedrop",context:{rowLength:0,myDrops:[],bestDrops:[],allDrops:[],newBestDropsCount:0,newAllDropsCount:0},type:"parallel",states:{tab:{initial:"route",states:{route:{always:[{cond:"rememberedBestTab",target:"best"},{target:"all"}]},all:{entry:["rememberAllTab"],on:T()({},_.CHNAGE_TO_BEST,"best")},best:{entry:["rememberBestTab"],on:T()({},_.CHNAGE_TO_ALL,"all")}}},visibility:{initial:"visible",states:{hidden:{on:T()({},_.ON,"visible")},visible:{on:T()({},_.OFF,"hidden")}}},data:{entry:["initSocket"],on:T()({},_.CHANGE_ROW_LENGTH,{actions:["setRowLength"]}),initial:"running",states:{paused:{on:T()({},_.ON,"running.waiting")},running:{invoke:{src:"invokeSocket"},on:(y={},T()(y,_.OFF,"paused"),T()(y,_.ADD_ITEMS,[{in:"#Livedrop.tab.best",cond:"noBestPublicDrops",actions:["assignOnlyPublicDrops"],target:".animating"},{actions:["assignOnlyPublicDrops"],target:".animating"}]),T()(y,_.ADD_MY_ITEMS,[{in:"#Livedrop.tab.best",cond:"noBestMyDrops",actions:["assignOnlyMyDrops"],target:".animating"},{actions:["assignOnlyMyDrops"],target:".animating"}]),y),initial:"waiting",states:{waiting:{},animating:{exit:["trimDrops"],on:T()({},_.ANIMATION_COMPLETE,"waiting")}}}}}}},{services:{invokeSocket:function(){var t;return null===(t=window.__livedropSocket)||void 0===t?void 0:t.invoke}},guards:{rememberedBestTab:function(){return"best"===window.localStorage.livedropTab},noBestPublicDrops:function(t,e){return!e.data.filter(S).filter(C).length},noBestMyDrops:function(t){return!t.myDrops.filter(C).length}},actions:{rememberAllTab:function(){window.localStorage.livedropTab="all"},rememberBestTab:function(){window.localStorage.livedropTab="best"},initSocket:function(){var t;return null===(t=window.__livedropSocket)||void 0===t?void 0:t.init()},setRowLength:(0,A.f0)({rowLength:function(t,e){return e.data}}),trimDrops:(0,A.f0)({bestDrops:function(t){return t.bestDrops.slice(0,t.rowLength)},allDrops:function(t){return t.allDrops.slice(0,t.rowLength)}}),assignOnlyPublicDrops:(0,A.f0)((function(t,e){var n=function(t){return t.map((function(t){var e=a()(t,12),n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],p=e[10],v=e[11];return{Id:[i,d,Math.random()].join(""),User_avatar:"".concat("https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/").concat(n.substr(0,2),"/").concat(n),Profile_link:i,User_name:r,Upgrader:o,Percent:s,Bg:l,Type:c,Lvl:u,Data_unix:d,Case_image:f,Product_image:p,Product_name:v}}))}(e.data),i=n.filter(x),r=n.filter(S),o=r.filter(C);return{myDrops:[].concat(M()(i),M()(t.myDrops)),bestDrops:[].concat(M()(o),M()(t.bestDrops)),allDrops:[].concat(M()(r),M()(t.allDrops)),newBestDropsCount:Math.min(o.length,t.rowLength),newAllDropsCount:Math.min(r.length,t.rowLength)}})),assignOnlyMyDrops:(0,A.f0)((function(t){var e=t.myDrops.filter(C);return{myDrops:[],bestDrops:[].concat(M()(e),M()(t.bestDrops)),allDrops:[].concat(M()(t.myDrops),M()(t.allDrops)),newBestDropsCount:Math.min(e.length,t.rowLength),newAllDropsCount:Math.min(t.myDrops.length,t.rowLength)}}))}}),L=262,I={1:"#b0c3d9",2:"#5e98d9",3:"#4b69ff",4:"#8847ff",5:"#d32ce6",6:"#eb4b4b",7:"#e4ae39"},P={1:"#7c95ad",2:"#5370e6",3:"#df5dee",4:"#a41aff",5:"#ff445d",6:"#dcae64"},Z=function(t,e){var n=Date.now()-t;if(n>=6e4){var i=Math.max(0,Math.round(n/6e4));return"RelativeTimeFormat"in Intl?new Intl.RelativeTimeFormat(document.documentElement.lang,{style:"short"}).format(-i,"minutes"):"".concat(i," ").concat(e.timer.minutes)}var r=Math.max(0,Math.round(n/1e3));return"RelativeTimeFormat"in Intl?new Intl.RelativeTimeFormat(document.documentElement.lang,{style:"short"}).format(-r,"seconds"):"".concat(r," ").concat(e.timer.seconds)},V=function(t){var e=t.cdnUrl,n=t.data,r=t.lang,o=l()(t,["cdnUrl","data","lang"]),s=1e3*+n.Data_unix,u=(0,i.useState)(Z(s,r)),d=a()(u,2),f=d[0],p=d[1];return(0,i.useEffect)((function(){var t=setInterval((function(){return p(Z(s,r))}),1e3);return function(){return clearInterval(t)}}),[p]),(0,c.tZ)("a",Object.assign({href:window.__livedrop.profileLink+n.Profile_link,className:"absolute top-0 left-0 h-full overflow-hidden livedrop-item",style:{"--bg":'url("'.concat(n.Case_image,'")'),"--color":"Vdolce"===n.Type?"#2f76be":"Skins"===n.Type?I[n.Bg]:P[n.Bg]}},o),(0,c.tZ)("div",{className:"livedrop-item-front"},(0,c.tZ)("div",{className:"livedrop-item-content"},n.Percent?(0,c.tZ)("div",{className:"livedrop-item-percent"},n.Percent,"%"):null,(0,c.tZ)("div",{className:"livedrop-item-name t-h3"},n.Product_name),(0,c.tZ)("div",{className:"livedrop-item-time"},f)),(0,c.tZ)("img",{src:n.Product_image.includes("csgo_icons")&&!location.hostname.includes("script")?"".concat(e).concat(n.Product_image):n.Product_image,alt:"",className:"livedrop-item-img"})),(0,c.tZ)("div",{className:"livedrop-item-back"},(0,c.tZ)("img",{src:n.User_avatar,alt:"",className:"object-cover w-12 h-12 mr-4 rounded-full"}),(0,c.tZ)("div",{className:"livedrop-item-content"},(0,c.tZ)("div",{className:"livedrop-item-name t-h3"},n.User_name),(0,c.tZ)("div",{className:"livedrop-item-time"},f))),(0,c.tZ)("div",{className:"livedrop-item-gradient"}),(0,c.tZ)("div",{className:"livedrop-item-border"}))},H=function(t){var e,n,r,o,s,l,f=t.initialData,p=(r=(0,i.useState)((function(){return{width:window.innerWidth,height:window.innerHeight}})),o=a()(r,2),s=o[0],l=o[1],(0,i.useEffect)((function(){function t(){l({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),s).width,v=Math.ceil(p/L),h=(0,u.eO)(k,{context:{rowLength:v,bestDrops:null===(e=f.bestDrops)||void 0===e?void 0:e.slice(0,v),allDrops:null===(n=f.allDrops)||void 0===n?void 0:n.slice(0,v),newBestDropsCount:Math.min(f.bestDrops.length,v),newAllDropsCount:Math.min(f.allDrops.length,v)}}),g=a()(h,3),b=g[0],y=g[1],O=g[2],M=function(){var t=(0,i.useState)(w()),e=a()(t,2),n=e[0],r=e[1];function o(){r(w())}return(0,i.useEffect)((function(){return window.addEventListener("visibilitychange",o),function(){window.removeEventListener("visibilitychange",o)}}),[]),n}(),N=function(t){var e={},n=e.threshold,r=e.delay,o=e.trackVisibility,a=e.rootMargin,s=e.root,l=e.triggerOnce,c=e.skip,u=e.initialInView,d=(0,i.useRef)(),f=(0,i.useState)({inView:!!u}),p=f[0],v=f[1],h=(0,i.useCallback)((function(t){void 0!==d.current&&(d.current(),d.current=void 0),c||t&&(d.current=m(t,(function(t,e){v({inView:t,entry:e}),e.isIntersecting&&l&&d.current&&(d.current(),d.current=void 0)}),{root:s,rootMargin:a,threshold:n,trackVisibility:o,delay:r}))}),[Array.isArray(n)?n.toString():n,s,a,l,c,o,r]);(0,i.useEffect)((function(){d.current||!p.entry||l||c||v({inView:!!u})}));var g=[h,p.inView,p.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}(),T=a()(N,2),E=T[0],A=T[1];return(0,i.useEffect)((function(){y(_.CHANGE_ROW_LENGTH,{data:v})}),[v]),(0,i.useEffect)((function(){window.__livedropService=O,O.onTransition((0,D.x2)(k.id))}),[O]),(0,i.useEffect)((function(){y(M&&A?_.ON:_.OFF)}),[M,A]),(0,c.tZ)("div",{ref:E,className:"relative grid w-full h-full overflow-hidden",css:{minHeight:80},onMouseOver:function(){return y(_.OFF)},onMouseLeave:function(){return y(_.ON)}},(0,c.tZ)("div",{className:"absolute top-0 left-0 z-10 flex flex-col items-center justify-center w-16 h-full p-2 text-xs font-bold transition duration-300 ease-in-out cursor-default hover:opacity-50 text-red bg-navy-700",css:{transform:"translateX(-100%)","*:hover > &":{transform:"none"}}},(0,c.tZ)("svg",{viewBox:"0 0 24 24",className:"w-5 h-5 fill-current"},(0,c.tZ)("path",{d:"M14,19H18V5H14M6,19H10V5H6V19Z"})),"PAUSED"),(0,c.tZ)(d.M_,{initial:!1},b.matches("tab.best")&&(0,c.tZ)(d.ww.div,{key:"tab.best",initial:{y:"-100%"},animate:{y:0},exit:{y:"-100%"},css:{gridArea:"1 / 1 / 2 / 2"}},(0,c.tZ)("div",{className:"flex-shrink-0 w-screen h-full"},(0,c.tZ)("ul",{className:"relative flex h-full livedrop-list js-livedrop-list"},(0,c.tZ)(d.M_,{initial:!1},b.context.bestDrops.map((function(t,e){return(0,c.tZ)(d.ww.li,{key:t.Id,initial:{x:e*L-L*b.context.newBestDropsCount},animate:{x:e*L},exit:{},transition:{duration:.3,ease:"easeOut"},onAnimationComplete:0===e?function(){return y(_.ANIMATION_COMPLETE)}:null,className:"h-full"},(0,c.tZ)(V,{cdnUrl:f.cdnUrl,data:t,lang:f.lang}))})))))),b.matches("tab.all")&&(0,c.tZ)(d.ww.div,{key:"tab.all",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},css:{gridArea:"1 / 1 / 2 / 2"}},(0,c.tZ)("div",{className:"flex-shrink-0 w-screen h-full overflow-hidden"},(0,c.tZ)("ul",{className:"relative flex h-full livedrop-list js-livedrop-list"},(0,c.tZ)(d.M_,{initial:!1},b.context.allDrops.map((function(t,e){return(0,c.tZ)(d.ww.li,{key:t.Id,initial:{x:e*L-L*b.context.newAllDropsCount},animate:{x:e*L},exit:{},transition:{duration:.3,ease:"easeOut"},onAnimationComplete:0===e?function(){return y(_.ANIMATION_COMPLETE)}:null},(0,c.tZ)(V,{cdnUrl:f.cdnUrl,data:t,lang:f.lang}))}))))))))};(0,r.s)(i.createElement(H,{initialData:window.__livedrop}),document.querySelector("#livedrop-root"))},2510:function(t,e,n){n.d(e,{x2:function(){return u}});var i=n(319),r=n.n(i),o=(n(9713),n(3038)),a=n.n(o),s=n(1587),l=n.n(s);n(3729),/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);var c=Object.entries(l().screens).reduce((function(t,e){var n=a()(e,2),i=n[0],r=n[1];return t[i]="@media (min-width: ".concat(r,")"),t.js[i]="(min-width: ".concat(r,")"),t.max[i]="@media (max-width: ".concat(r,")"),t.raw[i]=r,t}),{js:{},max:{},raw:{}});c.supportsHover="@media (hover: hover)",c.js.supportsHover="(hover: hover)";var u=function(t){return function(e){e.changed&&(document.querySelectorAll('[data-if^="#'.concat(t,'"]')).forEach((function(t){var e,n;(e=t.classList).remove.apply(e,r()(t.dataset.on.split(" "))),(n=t.classList).add.apply(n,r()(t.dataset.off.split(" ")))})),e.toStrings().forEach((function(e){document.querySelectorAll('[data-if="#'.concat(t,".").concat(e,'"]')).forEach((function(t){var e,n;(e=t.classList).remove.apply(e,r()(t.dataset.off.split(" "))),(n=t.classList).add.apply(n,r()(t.dataset.on.split(" ")))}))})))}}}},e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.m=t,n.x=function(){},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.j=434,function(){var t={434:0},e=[[8311,736,351]],i=function(){},r=function(r,o){for(var a,s,l=o[0],c=o[1],u=o[2],d=o[3],f=0,p=[];f<l.length;f++)s=l[f],n.o(t,s)&&t[s]&&p.push(t[s][0]),t[s]=0;for(a in c)n.o(c,a)&&(n.m[a]=c[a]);for(u&&u(n),r&&r(o);p.length;)p.shift()();return d&&e.push.apply(e,d),i()},o=self.webpackChunk=self.webpackChunk||[];function a(){for(var i,r=0;r<e.length;r++){for(var o=e[r],a=!0,s=1;s<o.length;s++){var l=o[s];0!==t[l]&&(a=!1)}a&&(e.splice(r--,1),i=n(n.s=o[0]))}return 0===e.length&&(n.x(),n.x=function(){}),i}o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o));var s=n.x;n.x=function(){return n.x=s||function(){},(i=a)()}}(),n.x()}();
//# sourceMappingURL=livedrop.425a1c5a286749f4eb7b.bundle.js.map